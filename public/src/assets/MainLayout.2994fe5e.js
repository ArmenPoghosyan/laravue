import{_ as L,b as U,f as l,r as t,o as r,c,w as a,an as e,b0 as x,u as D,g as z,t as u,b6 as g,bw as S,bx as T,d as Y,e as A,F as G,aY as I,aL as J}from"./index.24c8b4bf.js";import{C as q}from"./ClosePopup.515b0658.js";const O={setup(){return{is_open:U({get:()=>l.store.state.app.media_popup.open,set:n=>l.store.commit("app/media_popup",{open:n,media:null})})}}};function Q(o,n,k,s,h,w){const p=t("ap-button"),b=t("ap-img"),d=t("ap-card"),i=t("ap-dialog");return r(),c(i,{modelValue:s.is_open,"onUpdate:modelValue":n[0]||(n[0]=v=>s.is_open=v)},{default:a(()=>[e(d,{class:"fit bg-grey-9 relative-position",style:{"max-width":"90%","max-height":"75%"}},{default:a(()=>[x(e(p,{round:"",color:"white","text-color":"text",size:"12px",icon:"close",class:"absolute-top-right q-ma-md top"},null,512),[[q]]),e(b,{class:"fit",fit:"contain",src:o.state.app.media_popup.media},null,8,["src"])]),_:1})]),_:1},8,["modelValue"])}var W=L(O,[["render",Q]]);const X={setup(){const o=U({get:()=>l.store.state.app.password_popup.open,set:s=>l.store.commit("app/password_popup",{open:s})}),n=D({loading:!1,data:{password:""}});async function k(){var h;n.value.loading=!0,l.clearErrors();const s=await l.store.dispatch("user/check_password",n.value.data);if(s.status){o.value=!1,n.value.data.password="";let w=(h=l.state.app.password_popup)==null?void 0:h.fn;w&&typeof w=="function"&&w(),l.store.commit("app/password_popup",{open:!1,fn:null})}else s.statusCode==422?l.setErrors(s.errors):l.$q.notify({type:"negative",message:l.$t("globals.errors.unknown")});n.value.loading=!1}return{state:n,is_open:o,check:k}}},Z={class:"text-h6 q-mr-auto"};function ee(o,n,k,s,h,w){const p=t("ap-button"),b=t("ap-dialog-header"),d=t("ap-card-section"),i=t("ap-input"),v=t("ap-dialog-card"),_=t("ap-dialog");return r(),c(_,{modelValue:s.is_open,"onUpdate:modelValue":n[1]||(n[1]=m=>s.is_open=m)},{default:a(()=>[e(v,{style:{"max-width":"500px"}},{default:a(()=>[e(b,null,{default:a(()=>[z("span",Z,u(o.$t("globals.popups.password.title")),1),x(e(p,{round:"",flat:"",icon:"close",size:"12px"},null,512),[[q]])]),_:1}),e(d,{class:"text-white bg-negative q-pa-md"},{default:a(()=>[g(u(o.$t("globals.popups.password.description")),1)]),_:1}),e(d,null,{default:a(()=>[e(i,{type:"password",modelValue:s.state.data.password,"onUpdate:modelValue":n[0]||(n[0]=m=>s.state.data.password=m),onKeypress:S(s.check,["enter"]),label:o.$t("globals.user_fields.password"),validate:"password"},null,8,["modelValue","onKeypress","label"])]),_:1}),e(d,{class:"row justify-between"},{default:a(()=>[x(e(p,{flat:"",label:o.$t("globals.cancel")},null,8,["label"]),[[q]]),e(p,{color:"primary",label:o.$t("globals.continue"),loading:s.state.loading,onClick:s.check},null,8,["label","loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var ae=L(X,[["render",ee]]);const oe=T({name:"MainLayout",components:{PasswordPopup:ae,MediaPopup:W},setup(){const o=D(!1);function n(){o.value=!o.value}return{drawer:o,toggleDrawer:n}}}),te={class:"column"},ne={class:"text-caption text-no-wrap"};function se(o,n,k,s,h,w){const p=t("ap-button"),b=t("ap-link"),d=t("ap-img"),i=t("ap-icon"),v=t("ap-avatar"),_=t("ap-card-section"),m=t("ap-separator"),f=t("ap-item-section"),C=t("ap-item-label"),$=t("ap-item"),V=t("ap-list"),j=t("ap-card"),B=t("ap-menu"),M=t("ap-header"),N=t("ap-drawer"),P=t("router-view"),E=t("ap-page-container"),F=t("password-popup"),K=t("media-popup"),H=t("ap-layout");return r(),c(H,{view:"lHh Lpr lFf"},{default:a(()=>[e(M,{elevated:"",class:"row items-center q-gap-sm bg-accent"},{default:a(()=>[e(p,{flat:"",round:"",icon:"menu","aria-label":"Menu",onClick:o.toggleDrawer},null,8,["onClick"]),e(b,{class:"text-h6 text-white text-no-underline"},{default:a(()=>[g(u(o.config.app.name),1)]),_:1}),e(p,{round:"",flat:"",class:"q-ml-auto"},{default:a(()=>[e(v,{bordered:"",class:"flex-shrink bg-white overflow-hidden",size:"36px"},{default:a(()=>[o.$user.avatar?(r(),c(d,{key:0,class:"fit",fit:"contain",src:o.media(o.$user.avatar,"s")},null,8,["src"])):(r(),c(i,{key:1,name:"sym_o_account_circle",class:"text-grey-6",size:"24px"}))]),_:1}),e(B,null,{default:a(()=>[e(j,{rounded:!1},{default:a(()=>[e(_,{class:"row no-wrap items-center q-gap-sm"},{default:a(()=>[e(v,{bordered:"",class:"flex-shrink flex flex-center bg-white",size:"40px"},{default:a(()=>[o.$user.avatar?(r(),c(d,{key:0,class:"fit",fit:"contain",src:o.media(o.$user.avatar,"s")},null,8,["src"])):(r(),c(i,{key:1,name:"sym_o_person",class:"text-grey-6",size:"24px"}))]),_:1}),z("div",te,[z("span",ne,u(o.$user.full_name),1)])]),_:1}),e(m),e(_,{"no-padding":""},{default:a(()=>[e(V,{separator:""},{default:a(()=>[e($,{clickable:"",exact:"",to:{name:"profile.index"}},{default:a(()=>[e(f,{icon:""},{default:a(()=>[e(i,{name:"person",size:"24px"})]),_:1}),e(f,null,{default:a(()=>[e(C,null,{default:a(()=>[g(u(o.$t("pages.profile.title")),1)]),_:1})]),_:1})]),_:1},8,["to"]),e($,{clickable:"",onClick:o.logout},{default:a(()=>[e(f,{icon:""},{default:a(()=>[e(i,{name:"logout",size:"24px"})]),_:1}),e(f,null,{default:a(()=>[e(C,null,{default:a(()=>[g("Logout")]),_:1})]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(N,{modelValue:o.drawer,"onUpdate:modelValue":n[1]||(n[1]=y=>o.drawer=y),overlay:"",behavior:"mobile",bordered:""},{default:a(()=>[e(j,{flat:"",class:"fit column no-wrap"},{default:a(()=>[e(_,{class:"row items-center justify-between"},{default:a(()=>[e(b,{class:"text-no-underline text-secondary text-h6",to:{name:o.config.app.home}},{default:a(()=>[g(u(o.config.app.name),1)]),_:1},8,["to"]),e(p,{flat:"",round:"",icon:"close",size:"sm",onClick:n[0]||(n[0]=y=>o.drawer=!1)})]),_:1}),e(m),e(_,{"no-padding":"",class:"full-height"},{default:a(()=>[e(V,{separator:""},{default:a(()=>[e($,{clickable:"",exact:"",to:{name:"localizations.index"},"active-class":"bg-grey-3 text-primary"},{default:a(()=>[e(f,{icon:""},{default:a(()=>[e(i,{name:"translate",size:"24px"})]),_:1}),e(f,null,{default:a(()=>[e(C,null,{default:a(()=>[g(u(o.$t("pages.localizations.title")),1)]),_:1})]),_:1})]),_:1},8,["to"])]),_:1})]),_:1}),e(m),e(_,null,{default:a(()=>[o.lists.languages.length>1?(r(),c(p,{key:0,rounded:"",flat:"",class:"q-ml-auto header__actionButton justify-self: start",icon:"language",size:"14px",label:o.current_locale.toUpperCase()},{default:a(()=>[e(B,{"transition-show":"jump-down","transition-hide":"jump-up",anchor:"top left",self:"bottom left",offset:[0,8]},{default:a(()=>[e(V,{separator:""},{default:a(()=>[(r(!0),Y(G,null,A(o.lists.languages,(y,R)=>x((r(),c($,{key:R,clickable:"",onClick:le=>o.set_locale(y.value),active:y.value==o.current_locale,"active-class":"bg-grey-3"},{default:a(()=>[e(f,null,{default:a(()=>[g(u(y.label),1)]),_:2},1024)]),_:2},1032,["onClick","active"])),[[J]])),128))]),_:1})]),_:1})]),_:1},8,["label"])):I("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(E,null,{default:a(()=>[e(P)]),_:1}),e(F),e(K)]),_:1})}var ie=L(oe,[["render",se]]);export{ie as default};
