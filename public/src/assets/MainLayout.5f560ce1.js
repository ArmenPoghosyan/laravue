import{_ as j,b as N,f as s,r as o,o as i,c as d,w as a,ab as e,aR as C,y as U,g as z,t as u,aZ as m,bw as S,bx as T,d as Z,e as A,F as G,aN as I,az as J}from"./index.de5baf35.js";import{C as q}from"./ClosePopup.fbcc733e.js";const O={setup(){return{is_open:N({get:()=>s.store.state.app.media_popup.open,set:n=>s.store.commit("app/media_popup",{open:n,media:null})})}}};function Q(t,n,$,l,h,w){const p=o("ap-button"),b=o("ap-img"),_=o("ap-card"),r=o("ap-dialog");return i(),d(r,{modelValue:l.is_open,"onUpdate:modelValue":n[0]||(n[0]=v=>l.is_open=v)},{default:a(()=>[e(_,{class:"fit bg-grey-9 relative-position",style:{"max-width":"90%","max-height":"75%"}},{default:a(()=>[C(e(p,{round:"",color:"white","text-color":"text",size:"12px",icon:"close",class:"absolute-top-right q-ma-md top"},null,512),[[q]]),e(b,{class:"fit",fit:"contain",src:t.state.app.media_popup.media},null,8,["src"])]),_:1})]),_:1},8,["modelValue"])}var W=j(O,[["render",Q]]);const X={setup(){const t=N({get:()=>s.store.state.app.password_popup.open,set:l=>s.store.commit("app/password_popup",{open:l})}),n=U({loading:!1,data:{password:""}});async function $(){var h;n.value.loading=!0,s.clearErrors();const l=await s.store.dispatch("user/check_password",n.value.data);if(l.status){t.value=!1,n.value.data.password="";let w=(h=s.state.app.password_popup)==null?void 0:h.fn;w&&typeof w=="function"&&w(),s.store.commit("app/password_popup",{open:!1,fn:null})}else l.statusCode==422?s.setErrors(l.errors):s.$q.notify({type:"negative",message:s.$t("globals.errors.unknown")});n.value.loading=!1}return{state:n,is_open:t,check:$}}},Y={class:"text-h6 q-mr-auto"};function ee(t,n,$,l,h,w){const p=o("ap-button"),b=o("ap-dialog-header"),_=o("ap-card-section"),r=o("ap-input"),v=o("ap-dialog-card"),f=o("ap-dialog");return i(),d(f,{modelValue:l.is_open,"onUpdate:modelValue":n[1]||(n[1]=g=>l.is_open=g)},{default:a(()=>[e(v,{style:{"max-width":"500px"}},{default:a(()=>[e(b,null,{default:a(()=>[z("span",Y,u(t.$t("globals.popups.password.title")),1),C(e(p,{round:"",flat:"",icon:"close",size:"12px"},null,512),[[q]])]),_:1}),e(_,{class:"text-white bg-negative q-pa-md"},{default:a(()=>[m(u(t.$t("globals.popups.password.description")),1)]),_:1}),e(_,null,{default:a(()=>[e(r,{type:"password",modelValue:l.state.data.password,"onUpdate:modelValue":n[0]||(n[0]=g=>l.state.data.password=g),onKeypress:S(l.check,["enter"]),label:t.$t("globals.user_fields.password"),validate:"password"},null,8,["modelValue","onKeypress","label"])]),_:1}),e(_,{class:"row justify-between"},{default:a(()=>[C(e(p,{flat:"",label:t.$t("globals.cancel")},null,8,["label"]),[[q]]),e(p,{color:"primary",label:t.$t("globals.continue"),loading:l.state.loading,onClick:l.check},null,8,["label","loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var ae=j(X,[["render",ee]]);const te=T({name:"MainLayout",components:{PasswordPopup:ae,MediaPopup:W},setup(){const t=U(!1);function n(){t.value=!t.value}return{drawer:t,toggleDrawer:n}}}),oe={class:"column"},ne={class:"text-caption text-no-wrap"};function le(t,n,$,l,h,w){const p=o("ap-button"),b=o("ap-link"),_=o("ap-img"),r=o("ap-icon"),v=o("ap-avatar"),f=o("ap-card-section"),g=o("ap-separator"),c=o("ap-item-section"),x=o("ap-item-label"),k=o("ap-item"),V=o("ap-list"),B=o("ap-card"),L=o("ap-menu"),D=o("ap-header"),M=o("ap-drawer"),P=o("router-view"),E=o("ap-page-container"),F=o("password-popup"),K=o("media-popup"),R=o("ap-layout");return i(),d(R,{view:"lHh Lpr lFf"},{default:a(()=>[e(D,{elevated:"",class:"row items-center q-gap-sm bg-accent"},{default:a(()=>[e(p,{flat:"",round:"",icon:"menu","aria-label":"Menu",onClick:t.toggleDrawer},null,8,["onClick"]),e(b,{class:"text-h6 text-white text-no-underline"},{default:a(()=>[m(u(t.config.app.name),1)]),_:1}),e(p,{round:"",flat:"",class:"q-ml-auto"},{default:a(()=>[e(v,{bordered:"",class:"flex-shrink bg-white overflow-hidden",size:"36px"},{default:a(()=>[t.$user.avatar?(i(),d(_,{key:0,class:"fit",fit:"contain",src:t.media(t.$user.avatar,"s")},null,8,["src"])):(i(),d(r,{key:1,name:"sym_o_account_circle",class:"text-grey-6",size:"24px"}))]),_:1}),e(L,null,{default:a(()=>[e(B,{rounded:!1},{default:a(()=>[e(f,{class:"row no-wrap items-center q-gap-sm"},{default:a(()=>[e(v,{bordered:"",class:"flex-shrink flex flex-center bg-white",size:"40px"},{default:a(()=>[t.$user.avatar?(i(),d(_,{key:0,class:"fit",fit:"contain",src:t.media(t.$user.avatar,"s")},null,8,["src"])):(i(),d(r,{key:1,name:"sym_o_person",class:"text-grey-6",size:"24px"}))]),_:1}),z("div",oe,[z("span",ne,u(t.$user.full_name),1)])]),_:1}),e(g),e(f,{"no-padding":""},{default:a(()=>[e(V,{separator:""},{default:a(()=>[e(k,{clickable:"",exact:"",to:{name:"profile.index"}},{default:a(()=>[e(c,{icon:""},{default:a(()=>[e(r,{name:"person",size:"24px"})]),_:1}),e(c,null,{default:a(()=>[e(x,null,{default:a(()=>[m(u(t.$t("pages.profile.title")),1)]),_:1})]),_:1})]),_:1},8,["to"]),e(k,{clickable:"",onClick:t.logout},{default:a(()=>[e(c,{icon:""},{default:a(()=>[e(r,{name:"logout",size:"24px"})]),_:1}),e(c,null,{default:a(()=>[e(x,null,{default:a(()=>[m("Logout")]),_:1})]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(M,{modelValue:t.drawer,"onUpdate:modelValue":n[1]||(n[1]=y=>t.drawer=y),overlay:"",behavior:"mobile",bordered:""},{default:a(()=>[e(B,{flat:"",class:"fit column no-wrap"},{default:a(()=>[e(f,{class:"row items-center justify-between"},{default:a(()=>[e(b,{class:"text-no-underline text-secondary text-h6",to:{name:t.config.app.home}},{default:a(()=>[m(u(t.config.app.name),1)]),_:1},8,["to"]),e(p,{flat:"",round:"",icon:"close",size:"sm",onClick:n[0]||(n[0]=y=>t.drawer=!1)})]),_:1}),e(g),e(f,{"no-padding":"",class:"full-height"},{default:a(()=>[e(V,{separator:""},{default:a(()=>[e(k,{clickable:"",exact:"",to:{name:"users.index"},"active-class":"bg-grey-3 text-primary"},{default:a(()=>[e(c,{icon:""},{default:a(()=>[e(r,{name:"sym_o_group",size:"24px"})]),_:1}),e(c,null,{default:a(()=>[e(x,null,{default:a(()=>[m(u(t.$t("pages.users.title")),1)]),_:1})]),_:1})]),_:1},8,["to"]),e(k,{clickable:"",exact:"",to:{name:"localizations.index"},"active-class":"bg-grey-3 text-primary"},{default:a(()=>[e(c,{icon:""},{default:a(()=>[e(r,{name:"translate",size:"24px"})]),_:1}),e(c,null,{default:a(()=>[e(x,null,{default:a(()=>[m(u(t.$t("pages.localizations.title")),1)]),_:1})]),_:1})]),_:1},8,["to"])]),_:1})]),_:1}),e(g),e(f,null,{default:a(()=>[t.lists.languages.length>1?(i(),d(p,{key:0,rounded:"",flat:"",class:"q-ml-auto header__actionButton justify-self: start",icon:"language",size:"14px",label:t.current_locale.toUpperCase()},{default:a(()=>[e(L,{"transition-show":"jump-down","transition-hide":"jump-up",anchor:"top left",self:"bottom left",offset:[0,8]},{default:a(()=>[e(V,{separator:""},{default:a(()=>[(i(!0),Z(G,null,A(t.lists.languages,(y,H)=>C((i(),d(k,{key:H,clickable:"",onClick:se=>t.set_locale(y.value),active:y.value==t.current_locale,"active-class":"bg-grey-3"},{default:a(()=>[e(c,null,{default:a(()=>[m(u(y.label),1)]),_:2},1024)]),_:2},1032,["onClick","active"])),[[J]])),128))]),_:1})]),_:1})]),_:1},8,["label"])):I("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(E,null,{default:a(()=>[e(P)]),_:1}),e(F),e(K)]),_:1})}var ie=j(te,[["render",le]]);export{ie as default};
