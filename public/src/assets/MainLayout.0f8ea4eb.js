import{_ as j,b as N,f as r,r as o,o as c,c as _,w as a,ab as e,aR as C,y as U,g as V,t as u,aZ as d,bw as S,bx as T,d as Z,e as A,F as G,aN as I,az as J}from"./index.46c05b6a.js";import{C as q}from"./ClosePopup.91cbe47c.js";const O={setup(){return{is_open:N({get:()=>r.store.state.app.media_popup.open,set:n=>r.store.commit("app/media_popup",{open:n,media:null})})}}};function Q(t,n,x,l,k,w){const i=o("ap-button"),b=o("ap-img"),m=o("ap-card"),s=o("ap-dialog");return c(),_(s,{modelValue:l.is_open,"onUpdate:modelValue":n[0]||(n[0]=y=>l.is_open=y)},{default:a(()=>[e(m,{class:"fit bg-grey-9 relative-position",style:{"max-width":"90%","max-height":"75%"}},{default:a(()=>[C(e(i,{round:"",color:"white","text-color":"text",size:"12px",icon:"close",class:"absolute-top-right q-ma-md top"},null,512),[[q]]),e(b,{class:"fit",fit:"contain",src:t.state.app.media_popup.media},null,8,["src"])]),_:1})]),_:1},8,["modelValue"])}var W=j(O,[["render",Q]]);const X={setup(){const t=N({get:()=>r.store.state.app.password_popup.open,set:l=>r.store.commit("app/password_popup",{open:l})}),n=U({loading:!1,data:{password:""}});async function x(){var k;n.value.loading=!0,r.clearErrors();const l=await r.store.dispatch("user/check_password",n.value.data);if(l.status){t.value=!1,n.value.data.password="";let w=(k=r.state.app.password_popup)==null?void 0:k.fn;w&&typeof w=="function"&&w(),r.store.commit("app/password_popup",{open:!1,fn:null})}else l.statusCode==422?r.setErrors(l.errors):r.$q.notify({type:"negative",message:r.$t("globals.errors.unknown")});n.value.loading=!1}return{state:n,is_open:t,check:x}}},Y={class:"text-h6 q-mr-auto"};function ee(t,n,x,l,k,w){const i=o("ap-button"),b=o("ap-dialog-header"),m=o("ap-card-section"),s=o("ap-input"),y=o("ap-dialog-card"),f=o("ap-dialog");return c(),_(f,{modelValue:l.is_open,"onUpdate:modelValue":n[1]||(n[1]=g=>l.is_open=g)},{default:a(()=>[e(y,{style:{"max-width":"500px"}},{default:a(()=>[e(b,null,{default:a(()=>[V("span",Y,u(t.$t("globals.popups.password.title")),1),C(e(i,{round:"",flat:"",icon:"close",size:"12px"},null,512),[[q]])]),_:1}),e(m,{class:"text-white bg-negative q-pa-md"},{default:a(()=>[d(u(t.$t("globals.popups.password.description")),1)]),_:1}),e(m,null,{default:a(()=>[e(s,{type:"password",modelValue:l.state.data.password,"onUpdate:modelValue":n[0]||(n[0]=g=>l.state.data.password=g),onKeypress:S(l.check,["enter"]),label:t.$t("globals.user_fields.password"),validate:"password"},null,8,["modelValue","onKeypress","label"])]),_:1}),e(m,{class:"row justify-between"},{default:a(()=>[C(e(i,{flat:"",label:t.$t("globals.cancel")},null,8,["label"]),[[q]]),e(i,{color:"primary",label:t.$t("globals.continue"),loading:l.state.loading,onClick:l.check},null,8,["label","loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var ae=j(X,[["render",ee]]);const te=T({name:"MainLayout",components:{PasswordPopup:ae,MediaPopup:W},setup(){const t=U(!1);function n(){t.value=!t.value}return{drawer:t,toggleDrawer:n}}}),oe={class:"column"},ne={class:"text-caption text-no-wrap"};function le(t,n,x,l,k,w){const i=o("ap-button"),b=o("ap-link"),m=o("ap-img"),s=o("ap-icon"),y=o("ap-avatar"),f=o("ap-card-section"),g=o("ap-separator"),p=o("ap-item-section"),$=o("ap-item-label"),v=o("ap-item"),z=o("ap-list"),B=o("ap-card"),L=o("ap-menu"),D=o("ap-header"),M=o("ap-drawer"),P=o("router-view"),E=o("ap-page-container"),F=o("password-popup"),K=o("media-popup"),R=o("ap-layout");return c(),_(R,{view:"lHh Lpr lFf"},{default:a(()=>[e(D,{elevated:"",class:"row items-center q-gap-sm bg-accent"},{default:a(()=>[e(i,{flat:"",round:"",icon:"menu","aria-label":"Menu",onClick:t.toggleDrawer},null,8,["onClick"]),e(b,{class:"text-h6 text-white text-no-underline"},{default:a(()=>[d(u(t.config.app.name),1)]),_:1}),e(i,{round:"",flat:"",class:"q-ml-auto"},{default:a(()=>[e(y,{bordered:"",class:"flex-shrink bg-white overflow-hidden",size:"36px"},{default:a(()=>[t.$user.avatar?(c(),_(m,{key:0,class:"fit",fit:"contain",src:t.media(t.$user.avatar,"s")},null,8,["src"])):(c(),_(s,{key:1,name:"sym_o_account_circle",class:"text-grey-6",size:"24px"}))]),_:1}),e(L,null,{default:a(()=>[e(B,{rounded:!1},{default:a(()=>[e(f,{class:"row no-wrap items-center q-gap-sm"},{default:a(()=>[e(y,{bordered:"",class:"flex-shrink flex flex-center bg-white",size:"40px"},{default:a(()=>[t.$user.avatar?(c(),_(m,{key:0,class:"fit",fit:"contain",src:t.media(t.$user.avatar,"s")},null,8,["src"])):(c(),_(s,{key:1,name:"sym_o_person",class:"text-grey-6",size:"24px"}))]),_:1}),V("div",oe,[V("span",ne,u(t.$user.full_name),1)])]),_:1}),e(g),e(f,{"no-padding":""},{default:a(()=>[e(z,{separator:""},{default:a(()=>[e(v,{clickable:"",exact:"",to:{name:"profile.index"}},{default:a(()=>[e(p,{icon:""},{default:a(()=>[e(s,{name:"person",size:"24px"})]),_:1}),e(p,null,{default:a(()=>[e($,null,{default:a(()=>[d(u(t.$t("pages.profile.title")),1)]),_:1})]),_:1})]),_:1},8,["to"]),e(v,{clickable:"",onClick:t.logout},{default:a(()=>[e(p,{icon:""},{default:a(()=>[e(s,{name:"logout",size:"24px"})]),_:1}),e(p,null,{default:a(()=>[e($,null,{default:a(()=>[d("Logout")]),_:1})]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(M,{modelValue:t.drawer,"onUpdate:modelValue":n[1]||(n[1]=h=>t.drawer=h),overlay:"",behavior:"mobile",bordered:""},{default:a(()=>[e(B,{flat:"",class:"fit column no-wrap"},{default:a(()=>[e(f,{class:"row items-center justify-between"},{default:a(()=>[e(b,{class:"text-no-underline text-secondary text-h6",to:{name:t.config.app.home}},{default:a(()=>[d(u(t.config.app.name),1)]),_:1},8,["to"]),e(i,{flat:"",round:"",icon:"close",size:"sm",onClick:n[0]||(n[0]=h=>t.drawer=!1)})]),_:1}),e(g),e(f,{"no-padding":"",class:"full-height"},{default:a(()=>[e(z,{separator:""},{default:a(()=>[e(v,{clickable:"",exact:"",to:{name:"users.index"},"active-class":"bg-grey-3 text-primary"},{default:a(()=>[e(p,{icon:""},{default:a(()=>[e(s,{name:"sym_o_group",size:"24px"})]),_:1}),e(p,null,{default:a(()=>[e($,null,{default:a(()=>[d(u(t.$t("pages.users.title")),1)]),_:1})]),_:1})]),_:1},8,["to"]),e(v,{clickable:"",exact:"",to:{name:"users.index"},"active-class":"bg-grey-3 text-primary"},{default:a(()=>[e(p,{icon:""},{default:a(()=>[e(s,{name:"sym_o_group",size:"24px"})]),_:1}),e(p,null,{default:a(()=>[e($,null,{default:a(()=>[d(u(t.$t("pages.users.title")),1)]),_:1})]),_:1})]),_:1},8,["to"]),e(v,{clickable:"",exact:"",to:{name:"localizations.index"},"active-class":"bg-grey-3 text-primary"},{default:a(()=>[e(p,{icon:""},{default:a(()=>[e(s,{name:"translate",size:"24px"})]),_:1}),e(p,null,{default:a(()=>[e($,null,{default:a(()=>[d(u(t.$t("pages.localizations.title")),1)]),_:1})]),_:1})]),_:1},8,["to"])]),_:1})]),_:1}),e(g),e(f,null,{default:a(()=>[t.lists.languages.length>1?(c(),_(i,{key:0,rounded:"",flat:"",class:"q-ml-auto header__actionButton justify-self: start",icon:"language",size:"14px",label:t.current_locale.toUpperCase()},{default:a(()=>[e(L,{"transition-show":"jump-down","transition-hide":"jump-up",anchor:"top left",self:"bottom left",offset:[0,8]},{default:a(()=>[e(z,{separator:""},{default:a(()=>[(c(!0),Z(G,null,A(t.lists.languages,(h,H)=>C((c(),_(v,{key:H,clickable:"",onClick:se=>t.set_locale(h.value),active:h.value==t.current_locale,"active-class":"bg-grey-3"},{default:a(()=>[e(p,null,{default:a(()=>[d(u(h.label),1)]),_:2},1024)]),_:2},1032,["onClick","active"])),[[J]])),128))]),_:1})]),_:1})]),_:1},8,["label"])):I("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(E,null,{default:a(()=>[e(P)]),_:1}),e(F),e(K)]),_:1})}var ie=j(te,[["render",le]]);export{ie as default};
